language: java
sudo: required
dist: xenial
jdk:
- openjdk8
services:
- docker
git:
  depth: 250
install: true
script: "./buildViaTravis.sh"
env:
  global:
  - secure: ygmJqpkoL8uNQnCOSyl0s31cZ3t0noLxdusy+O4tYSnADjk8Xr8kJvJIFGglUMROSX+vMrcurhhm1N6raJfZqsrdREacyVFCB85ApsOVWEDetnV0G6NFXUrRHWFgrjswoOkzBB2D+MKWLouBYFE+IboxYF5gixmDfNJpvlMwej18iiP29okUFPzN6Bbb4LLImagAtDvd8PjhN/Hr+FqMzUNkQ3ueb5BHZDZbATa7zYgyc1WHaF6oV48kX6jK9+vXg68ajLmAwSTfbqdJJ9W1x8m33MzLkNIFISy9wqp9lS17ajfuYOc+zzojJm6Hj2472TndKrVQAc3B7XW1ySaf/jySbHEl9S6lDRTIl5pEAh5RxvNIuk8uS9moFlg0qm4zL0NiNnK2vAIha7MnRPi2b6cnuQ2mfeF544ooSMbSj9nwBm9j6J5CdluFBU4WDLiUBWkXlmB2aZfhiAwTxFCVWTFcjGPuWkqEO3RPJdhMhvIIEqmHxn1Xr0BuGCzJHFGzAd7Is+e0Q5AjLjtcko6pMbaybeK6YTyy1WOaVrIM3qaU1MS+SFe/E2+eCYnVQWfJDsh0J87gx1nmDlWLYdtdhQoDI+7AZexV9QMd4pCDX/2StXDntNCn2JoCLl8+Hh5cJ2Qz9efcBDnJ4QsY13vwrUb6/QneOyLyr511XSj65EA=
  - secure: N9+dIhbbr4N30DrGtJifiKkTapzw8POG0k0RxhnFLAjfGMeIGyi7vsFrmSBmzHbodXn7pArh1NSPOnhdC915rNDdD48/p5ksLFjsQqLSFQj+eUAbYrLZwl6kRq2qTzCbe8Q4wtjj3qJwzq+Rk6URGC0S0n79vAN56p8gf4xODgPH/lYeibqAyIeme+Bqh8kow6LZ5NZpfbH50ZJXwivcO1Ym1TToiY9oWB4crfZJcPEqBY3il80EyIulu3+NvRYPj/cTsNZdqi11XV/7DJrOJ48EqmnSvNfon+GemAxcmfhE+oXKLP6gyKrf8F1syoSiiO+fYKqymVCB4Re+jlw5gRB6WjykzTJnPAtJOAbbjzBwjvDlH+iRs/94zvzzYx3QjTBUf9pvZ8Msv8BrNqRcrJOx1cCp2oX7Cx8dcBBapq8xcfPP3wLBSs0aPuuOjkYegOUBPnkffCu+7kZ4PcCcMgIRVCE/4C7CmvEbUnCAES2w5yhrq+CSnTp/evYkWJz/T+iMNkyHyO/pA7yCvLSlSrjGhjVA4djsr/+DcuvKS+Gt4Bx+LAwHvkCQZ/lmLceJnCN39sfgW0xlODDSroRWBztJyabqcWGjY3o0QXAo7wWfOXc+qYO36nbinihmKq3KAR4C8ZZqA6cjhMUoIY/8BpPG5MeaJ0IjVKsVGtM/qUU=
  - secure: aJFSqKnVOrWKmBtwCQQzUI6XGfka1lfUvMZZ96VRdBIZ2spRUeT2J8tFITk8rCgBB1j8D1VhFx0+anj6c7y3NiSyQ9BZooVht+HB3+TFu+g0zH4AI4w9Z1K8sp6bzvv2abNFEeJGas7QSEidaZkf+vEFDFF2xS1nlZbPYWS/V7vqL4LsZRIDN2kPPIPTRjV3UGsZTZbo5qV2z9aH0sTjWVotAez71AXTXfqIHw+kFQ5ykOtM/ftirAck9olVrhF2/sBFlv/PB+k5TO2ipun4URwa76JTNyO4MOZStjhxNiFw6SNx6V8YvFz7Qmso1f9rQn7AhE7gtd4aGF46mz1dVqa9HjomeCOkA+JZM7MBmQBAFbscG0v+Uw7e2VvrKpFpQWZQHyu2MWgCOsXv5AROiSIxYv68vsdd0Kwk67cbTpRwfT3/j4qBOG12S7cQI5N5IHuZMVtFze9biL9S0AZriY3BZwxR9pIoaHdkLjtFnKHofyghC7a4o7uqa0XUqt1ikDIkYwxg2knLJ7KKjvTqrDXLEyQn9xLlMoT80KMFQktDJ1HZALv9YuCcJ8w2LCk5SUhBOyiuF6L3UN4DtY6COuNqDduR3YfVk/EWMem2a/DF0huMDH1uwWfzsS82x4K74dMIDGFwsyjys7TBrylVSRyjRcxA2crvXnwV7cugeDo=
  - secure: pMjq7IwDXCuqlqfieBUx9SJh+3Udix+KMV1pIxu/On9kA8ql80H+1EGkBGMmReekG9P+vYbMsNqXRUxREmcbGQ5h4+qZJPLnSgttOkr4adc7Dep723bf6+ZM7HsTHW0mnEQuwZqoekAdDncQY8wBCmC4hgpbKgOO03WVrIJXDEfoT3AeMhhXMKxjT5X0eOtsYz95tpNB/O4y29zGL71Jm8by6gXe3DFJbyTBoMfanXfl3/3UJJIz+d3LWXF0tJOawTFJp2IXny3seX/h+Q8Qy973Fer5vXIjijkRi3S5+a21Pjv9NArAJa/26M9KqzEre/9ThzbCdg2QCXiQrdy33fL+69LwtLhfWXwZwDoW5otTh4fJnCC7HuwpQ/51+mweUzQxlm75loZW6BV5oDL5Q/WqoTGh1PcmWxvG6d7kuxKIpANeidimgtmjp/QjGfgpKt0Kfs5GUN3WTjJ2XLSwkUPHGOSThAFdTu5TjXzbARu54vwJEcr7ceN/30owMXUVOSIswWDhGsBJRw/fNa9uhSnKCipJ8rVsrsgSTWCeQox+YUR4Dyo0+q5qxYwrNfWISEWojJCyeGqm4Q2THEhOajudFE1wZZa3gSToc9S5ltP0U7iF9fW46xoymu4DxQ0H4vBhtgV9En9fnYN9NRp6wGfXsOC/GPxp9trtGQLEMdw=
  - secure: ETi9GE3wC74HX0ECjsy71m+7hodRLLRuXuhwFnqHiZOuFrlBRtLd32rb+PAIHwK+iaVmMJIlZKMkmKKLbusfdcPUzoIaN2rMW3WMWFEgbTOCYrJKn/3PCAoMm9n4sNuwarIGTHO+hDNoKr7249MRsD0T5j7JY2RZeNlE/8wk2N6v4ja2+sLGscKYo4UjafycDNYlIGq4bPXAAdFhErcUjt21o/ebJAmyyPvqUinJoGjyTM3RLOzrPjDNrFtoriLs2fm1UJMid5NsM3Ho7xI/cntjqxhsJr6gWavZjUG0H5u83D3fvtvh7rHgGLBQYl2FjGDqZDArWMFRa8vH0j5LLVqZ+mEHV/08E93OzuZfqgGWxIheCXsLPNq7mErhLq4AXUFcpFDM1uEZXiXND8TZhDetXFk48PhKKl0wKDQnxFawvTGeWxhlPlwr5k52OPYVZEtGMWx9mGRMF2fEH+3TJENAhG+rkR3Jc96fhiTYdRjyNVxP2MI/373vGpToM1lna+6Jz2ivCbEQXeJYluIOCF3m9910f6TZ9xYa7EY8AzXpF0kcHyPZZfC69FxwPNzY3TGfr4/+yynwAS1PE0btngR2PxtrCpyCh+wUauRkcNME+DMWrqDOpZF2y3i61iTGEj6lbc1VOae7aY85mbKXwzlAp3TnphORvA5K4hjmrdc=
cache:
  directories:
  - "$HOME/.gradle"
after_failure:
- name=$(date +"%Y-%m-%d") && cat ./metacat-functional-tests/build/logs/metacat/catalina.$name.log
- name=$(date +"%Y-%m-%d") && cat ./metacat-functional-tests/build/logs/metacat/localhost.$name.log
- cat ./metacat-functional-tests/build/logs/metacat/spring.log
before_install:
- openssl aes-256-cbc -K $encrypted_d34093053982_key -iv $encrypted_d34093053982_iv
  -in secrets/signing-key.enc -out secrets/signing-key -d
