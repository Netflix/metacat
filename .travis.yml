language: java
sudo: required
dist: trusty
jdk:
  - oraclejdk8
services:
  - docker
install:
  # Update docker-engine using Ubuntu 'trusty' apt repo
  - curl -sSL "https://get.docker.com/gpg" | sudo -E apt-key add -
  - echo "deb https://apt.dockerproject.org/repo ubuntu-trusty main" | sudo tee -a /etc/apt/sources.list
  - docker version
  # Update docker-compose via pip
  - sudo pip install docker-compose
  - docker-compose version
  - ./installViaTravis.sh
script: ./buildViaTravis.sh
env:
  global:
  - secure: ec8P064JXqy8cfGWpLxiSfiw3MXGTh2SFMkklVe7OFgqMDpN6gsiRbb9NTeG6GQH3K/+fPg94E4/dCp4rl8lhWFxdQn0ffRmzdCL+0FxL/mHb4+ht13S3j0AnSixDcT3k1hK2FIJLSy/j2kTYR0dCrj2nZburOl5HSSo/dbKVk/anMEnZdIYIdRBUD3dU9xALSLzmLXmdWIyUbeS4LfJauvNVOxGwDYmgOjtGTnepWGIqwsjn/dHxgtmMgBr0wE/zfJHreSEFDHcKmYL/B4u4naVN1oKR8LQWSN2Lio4hVzC3P5US/ZMMvW7/Z7VWS9r2Fwwu/tQ1E0HE+7jbGkMIEfReKxHwyAlH6F21ZJTvV/B2l8SNM7PRYC6B2KIlo81TQ+te4r99P8u5WWipN/a6+ZXU55OKH4dhk6h8L5EapUWsYWfsdVAzbJof4aJmEXbEUy+dRiMzmR1oObWGgR1K3vFyMflVh3NzxCUR4RfeEA+jX1O7K1u9WmAC/FkIEX++HKCexUOoIIBpaJZveL5lEaYNNMJoE64GK0GNzYNnOqxcYY/E/tvGZy7vuwI3mquYu3nC0bbNQ0Aui6+mcP1xzNiPyXnZOBE5Kg5MlKIy0nXUe9nSyI1H5sh0ulPZ1/tw2rUzdRvvD/SpMtaIJ5CHOHZiftjF/3Z3kr2IgZNjk0=
  - secure: xnDuIQc2Kx996Oih2SaPQjXQIIKOb1PRfXXzzQz75CbsgSfgOdKQ0E5f+nH2dRgpxAGcbRdCtVHS80YYqIWg2kZTXlK44k3tpcnxu0Tjq9nfrvwziO2FXbD2dl5yjyaRnZquxlCwf7gHzC6JbaAFOB5/OzkhpztwcKa9k28gYY2vIjfxP764oL4aYnHSNvP2NrpG+aTlbqPzGL8txHjJ3Kw+c+SMHbyRPbR7K4R7AJeQ1CaQrMALowrydnkalxYV5bu5ZGeBmQ0hNiDm7Eg6r3UZPBwxLpx3NyVawr9S5p++Q+x4teGfr/RsHIt4tqvRssiDmRb7uXhBz2o272Y3CASiNDA5vPZ3S2MGW9zZO7eQevkMX4cGjbJDKaVoO56L80OgTJ23+gOIPjdiOGBFXJ1VPrEHuld2TpiK3FzHcUcYV/IQ0yC/d8txl96WzEsO/6qAuq57LrBAlcV64VH7d0m2YDjttcrv4mzFlUDYN22F4WnOPST3Kimzp01qEYVSA895oXeODeP3sFMxCzy2HSjyPEuCGIK5yDPPHhka0uwMkdeo3pAudPMmQhn8aiwD3YGNZibqrI+AI3JgnxI+lxrkf49EiOmTnEbdsOjaWt0i5y7jyzaqC2T2UP8JrG9ZBLdbL88U1s1hY3IoU/qjZpjW/2CNnlRLXZvHin1TN/s=
  - secure: imAK342eHtbrb33FKe/8uV3or9+URhe9jCZV9yux8vJUV7oQRH1ivbR9t/s2YcRa5aDFo7mgxM8Wi7AkSqY2J1E/BNtGtFbvQcjglwSNySnBLTAPXo1+wU5YvsEAroxLphQd8QK1x/1A+0+K6wgA2+lbSztCXE0QKb3nsvPyD+vsAzeyT+qks9h3Fs9AkBKJUZ0eIXCJYckjYSEsfmYIHpHcWGM4TcgEoXvYolz7tpuUCVZbntj2hbGJv8Jd9+OL/7Vc67Uhg2jW3I0u/HZx9cAwoz7NjbuhT/V6NGDU6At55C5VLaMnDWVt/nhadUTBwVC7/l31qWMvTNW80e8FAfLbQvs0OnVIWa0dg3ipXu4nSV9hGFS/GNwNb5u0YJkCVjd+Bp3Ku1BZsDYq73rU/uScwpDwFfhnpZZ44BuwFZoKhi04QsNm0qUPdppm0fOlFupl1TvdVkqZQiLGDE/bUlWlKMyblpN6dAZivKKCpYsbhjmuNeU14gmfPFevVjcrGhL8XJku70i7NaIOFiMWbq652zWXDoqICyaLVZv2NBR9CWFQSYNUPTrQlmsHFsNO+l5OFqVAXpJ9m73iAmsj208kLNtjdafmrIsCSyuQKzi8brIO1Z9sQkygRCQg0iKISq+IIAAgN00BeZEEYKfMT8h4yJ3wzOWz38yhZu19Nyw=
  - secure: z4gtdmpKrCwcj94Orx7xIRgByWssN+8tVrY/R5ctofPMP6pAWELay277xW1IX7Z9ex2674oCEr6MgZWT1pujTFa+vyQTkRVxX9nhlUkKP4QGLjJzCUuMe22Q/UCOFWbCh8TPAaosW7OQlMwFAb3ytMq26LiIziEep5YcIM2JY9J5FCzJr1zRAlMXVtEBtzdXBLe/3e+l9f2MJFEQv6UqeBC81NtNUxOWmOLp4/Diz6qg07Cpcrh2tvBzBJ9Ans8qkgIsqhWuJV/uugIP+fMUrjIFGdLwc7vczYigVZes9o9OQMidhAXX95hKUU7n266Uc6gPVndSzknVtc1Q756gEn2OptRDMuLKkbssIKJsbJvpbwhnBc0QLFSo433HFPQAFCeM7p+K2gUQTDBEyedJiU2wRt27qardg3bwOW5gtozjgoeijfUImyfbg1HeDKqEgaLPP25ckKGT+Wv/9tbRrEneVkKqUL1v2i4C1aiPKftomeKAXJZG47VZQseUDylviWj91Bw9n/EQgvm/4k3X68wXbEGJtDikDzWemIEuwH4g59Svu7Kzyl/KZRTy9e8iC921Eg3wFNVwN6tnETjyMz4AqAQH00BVbq/KxUO6XNCHV3YKgsU7GKuggqV6C81QzPmNRdVbSyn5t+W4i6iuWauKdJBgcN4/iNPOXx45CeU=
cache:
  directories:
  - $HOME/.gradle
after_failure:
  - name=$(date +"%Y-%m-%d") && cat ./metacat-functional-tests/build/logs/metacat/catalina.$name.log
  - name=$(date +"%Y-%m-%d") && cat ./metacat-functional-tests/build/logs/metacat/localhost.$name.log
